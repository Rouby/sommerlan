extend type Query {
  purchases: [Purchase!]!
  purchase(id: ID!): Purchase
}

extend type Mutation {
  createPurchase(
    title: String!
    description: String!
    estimatedCost: Float!
  ): Purchase!
  
  voteOnPurchase(
    purchaseId: ID!
    vote: VoteValue!
  ): Purchase!
  
  updatePurchaseStatus(
    purchaseId: ID!
    status: PurchaseStatus!
  ): Purchase!
}

type Purchase {
  id: ID!
  title: String!
  description: String!
  estimatedCost: Float!
  proposer: User!
  status: PurchaseStatus!
  createdAt: String!
  votes: [PurchaseVote!]!
  voteCount: VoteCount!
  userVote: PurchaseVote
}

type PurchaseVote {
  user: User!
  vote: VoteValue!
  createdAt: String!
}

type VoteCount {
  yes: Int!
  no: Int!
  abstain: Int!
}

enum VoteValue {
  YES
  NO
  ABSTAIN
}

enum PurchaseStatus {
  PROPOSED
  APPROVED
  REJECTED
  COMPLETED
}
